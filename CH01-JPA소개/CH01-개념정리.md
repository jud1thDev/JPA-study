> CRUD용 SQL을 반복해서 작성해야 하는 과정이 지루하고 비생산적이었다.
> <br>
> JPA는 SQL을 직접 작성하지 않아도 데이터 CRUD를 자동으로 처리해준다.(개발자는 SQL 매퍼에서 벗어나 비즈니스 로직에 집중할 수 있게 되었다.)
> 또한, 객체 중심으로 데이터를 다룰 수 있어서 데이터베이스와 자바 코드 사이의 차이를 해결해준다.

책의 서문에 등장하는 내용이다. 지금부터 '자바 ORM 표준 JPA 프로그래밍(김영한 저)'를 통해 JPA의 기초 이론과 핵심 원리, 스프링 프레임워크와 JPA의 사용 방법에 대해 알아보고자 한다.

<br>
<br>

# 1.1 SQL을 직접 다룰 때 발생하는 문제점과 JPA를 통한 해결

- **반복적인 코드 작성**:
  - JDBC 방식: 데이터베이스는 객체 구조와는 다른 데이터 중심의 구조를 가지므로 개발자가 SQL과 JDBC API를 활용해서 변환 작업을 직접 해주어야 한다.
  - JPA 방식: 메서드만 호출하면 CRUD 작업이 수행된다.
    - `persist()`: 객체를 저장, INSERT SQL 자동 실행
    - `find()`: 객체를 조회, SELECT SQL 자동 실행
    - `remove()`: 객체를 삭제, DELETE SQL 자동 실행
    - 별도의 수정 메서드는 제공하지 않지만, 객체를 조회한 후 값만 변경하면 자동으로 UPDATE SQL을 실행해준다.
- **SQL에 의존적인 개발**:
  - JDBC 방식: 기능을 모두 개발한 후 새로운 요구사항(ex. 필드를 하나 추가함)이 추가되면, 관련된 모든 SQL 코드를 수정해야 한다.
  - JPA 방식: 엔티티만 수정(필드 추가)하면, SQL에 자동으로 반영된다.

<br>
<br>

# 1.2 패러다임 불일치 문제와 JPA를 통한 해결

- 패러다임 불일치: 자바는 객체 지향 언어이고 데이터베이스는 관계형 모델을 기반으로 하기 때문에 차이가 발생한다.
  - 객체는 추상화, 상속, 다형성 등을 지원하지만
  - 데이터베이스의 테이블 구조로는 이러한 객체 구조를 저장하는 데 한계가 있다.

<br>

## 1.2.1 상속

- JDBC 방식:
  - 관계형 데이터베이스에는 상속 개념이 없어서 상속 구조와 비슷하게 직접 테이블을 나누거나, 하나의 테이블에 모든 필드를 넣어야 한다.
  - 여러 테이블로 나눌 시 복잡한 SQL문과 변환 코드가 필요할 것이다.
- JPA 방식:
  - 객체의 상속 구조를 데이터베이스 테이블로 자동 변환(사실은 테이블을 나눠서 상속처럼 동작하게 만드는 것)하고, 조회 시 부모-자식 테이블을 JOIN하여 결과를 반환한다.

<br>

## 1.2.2 연관관계

- JDBC 방식:
  - 객체는 참조로 관계를 표현하지만, 데이터베이스는 외래 키(FK)와 JOIN으로 관계를 표현하므로 변환이 필요하다.
- JPA 방식:
  - 개발자가 참조 방식(ex. `member.getTeam()`)을 사용하면 JPA가 자동으로 적절한 SQL문을 실행해준다.

<br>

## 1.2.3 객체 그래프 탐색

지금까지는 꼭 JPA를 사용하지 않더라도 매우 복잡한 SQL문으로 해결할 수 있는 문제들이었지만, **객체 그래프 탐색 문제는 JPA 없이는 극복하기 어려운 문제이다.**

- JDBC 방식에서 발생하는 객체 그래프 탐색 문제:
  - OOP에서는 `member.getOrder().getDelivery()`처럼 객체의 관계를 따라 자유롭게 탐색이 가능하다.
  - 그러나 관계형 데이터베이스에서는 **어떤 테이블끼리 JOIN할 지 미리 결정해두고 조회해야하므로** 유연한 탐색이 어렵다.
- JPA 방식:
  - 지연 로딩(`FetchType.LAZY`)을 활용해 실제로 사용할 때만 관련 데이터를 가져온다.
  - 불필요한 SQL 실행을 줄여 성능 최적화에 유리하다.

<br>

## 1.2.4 비교

JPA에는 객체를 비교할 때 '동일성(Identity) 비교'와 '동등성(Equality) 비교'라는 두 가지 개념을 사용한다.

- 동일성 비교: `==` 연산자, 객체 인스턴스의 주소 값을 비교
- 동등성 비교: `equals()` 메서드, 객체 내부의 값을 비교

변경사항이 있을 시 자동으로 UPDATE를 실행하는 기능, 중복 생성 방지 등의 기능을 위해 동일성 비교가 필요하다.
관계형 데이터베이스에서는 동등성 비교는 가능하지만, 동일성 비교를 구현하기엔 매우 어려움이 있는데 JPA는 이런 패러다임 불일치 문제를 해결해준다.

<br>
<br>

# 1.3. JPA란 무엇인가?

이 책의 제목이 그렇듯이.. JPA(Java Persistence API)는 자바 진영의 ORM 기술 표준이다.
- ORM(Object-Relational Mapping): 객체와 관계형 데이터베이스를 매핑
- 즉 **JPA란, 객체와 관계형 데이터베이스를 매핑하여 객체 중심으로 데이터를 관리할 수 있도록 하는 기술**이다.
- 다양한 ORM 프레임워크가 있는데 **hiberate**가 가장 많이 사용된다. 